---
import Layout from '../layouts/Layout.astro';
import Card from '../components/Card.astro';
---

<Layout title="æ¬¢è¿æ¥åˆ°è¨€è¥¿æ—©æœ¨çš„åšå®¢" description="è¨€è¥¿æ—©æœ¨çš„ä¸ªäººåšå®¢ï¼Œåˆ†äº«æŠ€æœ¯ã€ç”Ÿæ´»ä¸çµæ„Ÿã€‚ä½¿ç”¨ Astro æ„å»ºã€‚">
	<main>
		<div class="content-wrapper">
			<div class="hero">
				<h1 class="calligraphy-title"><span class="text-gradient">æ¬¢è¿æ¥åˆ°è¨€è¥¿æ—©æœ¨çš„åšå®¢</span></h1>
				<div class="quote-container">
					<p id="hitokoto-text" class="quote-text">æ­£åœ¨è†å¬å®‡å®™çš„ä½è¯­...</p>
					<p id="hitokoto-from" class="quote-author"></p>
				</div>
				<div class="hero-status">
					<div class="status-item">
						<span class="status-icon">ğŸ“…</span>
						<span id="hero-date">...</span>
					</div>
					<div class="status-divider"></div>
					<div class="status-item">
						<span class="status-icon">ğŸ“</span>
						<span id="hero-region">...</span>
					</div>
					<div class="status-divider"></div>
					<div class="status-item">
						<span class="status-icon">ğŸŒ¡ï¸</span>
						<span id="hero-weather">...</span>
					</div>
				</div>
				<div class="hero-actions">
					<a href="/blog" class="btn btn-primary">å¼€å§‹é˜…è¯»</a>
					<a href="/about" class="btn btn-secondary">äº†è§£æ›´å¤š</a>
				</div>
			</div>

			<ul role="list" class="link-card-grid">
				<Card href="/blog" title="æ–‡ç« åˆ—è¡¨" body="é˜…è¯»æœ€æ–°çš„æŠ€æœ¯æ–‡ç« å’Œå­¦ä¹ ç¬”è®°ã€‚" />
				<Card href="/about" title="å…³äºæˆ‘" body="äº†è§£æ›´å¤šå…³äºæˆ‘ä»¥åŠè¿™ä¸ªé¡¹ç›®çš„ä¿¡æ¯ã€‚" />
				<Card href="https://astro.build/themes/" title="ä¸»é¢˜åº“" body="æ¢ç´¢ç¤¾åŒºæ„å»ºçš„ä¸°å¯Œä¸»é¢˜åº“ã€‚" external />
				<Card href="https://astro.build/chat/" title="ç¤¾åŒºè®¨è®º" body="åŠ å…¥æˆ‘ä»¬å……æ»¡æ´»åŠ›çš„ Discord ç¤¾åŒºã€‚" external />
			</ul>
		</div>
	</main>
</Layout>

<style>
	main {
		margin: auto;
		padding: 2rem 1rem;
		max-width: 900px;
	}
	
	.content-wrapper {
		display: flex;
		flex-direction: column;
		align-items: center;
		padding-top: 3rem;
	}
	
	.hero {
		text-align: center;
		margin-bottom: 4rem;
	}
	
	h1 {
		font-size: 3.5rem;
		font-weight: 700;
		line-height: 1.2;
		margin-bottom: 1rem;
		letter-spacing: -0.02em;
	}
	
	.calligraphy-title {
		font-family: var(--font-special);
		font-size: 4rem; /* Slightly larger for calligraphy */
		font-weight: 400; /* Calligraphy looks better with normal weight usually */
	}

	.text-gradient {
		background: linear-gradient(135deg, var(--c-primary), var(--c-secondary), var(--c-primary));
		-webkit-background-clip: text;
		-webkit-text-fill-color: transparent;
		background-size: 200%;
		animation: gradient-flow 6s ease infinite;
	}

	@keyframes gradient-flow {
		0% {
			background-position: 0% 50%;
		}
		50% {
			background-position: 100% 50%;
		}
		100% {
			background-position: 0% 50%;
		}
	}
	
	.quote-container {
		min-height: 80px;
		margin-bottom: 2.5rem;
		display: flex;
		flex-direction: column;
		align-items: center;
		justify-content: center;
		gap: 0.5rem;
	}

	.quote-text {
		color: var(--c-text);
		font-size: 1.2rem;
		font-weight: 300;
		line-height: 1.6;
		font-family: var(--font-family-base);
		opacity: 0;
		transform: translateY(10px);
		transition: all 0.8s ease;
	}

	.quote-author {
		color: var(--c-text-light);
		font-size: 0.9rem;
		font-style: italic;
		opacity: 0;
		transition: all 0.8s ease 0.2s;
	}

	.quote-visible {
		opacity: 1;
		transform: translateY(0);
	}

	.hero-status {
		display: inline-flex;
		align-items: center;
		background: rgba(255, 255, 255, 0.4);
		backdrop-filter: blur(10px);
		padding: 0.5rem 1.5rem;
		border-radius: 2rem;
		border: 1px solid rgba(255, 255, 255, 0.3);
		margin-bottom: 2rem;
		gap: 1.2rem;
		box-shadow: 0 4px 15px rgba(0, 0, 0, 0.03);
	}

	html[data-theme='dark'] .hero-status {
		background: rgba(30, 31, 35, 0.4);
		border-color: rgba(255, 255, 255, 0.05);
	}

	.status-item {
		display: flex;
		align-items: center;
		gap: 0.5rem;
		font-size: 0.9rem;
		color: var(--c-text);
	}

	.status-divider {
		width: 1px;
		height: 15px;
		background: rgba(0, 0, 0, 0.1);
	}

	html[data-theme='dark'] .status-divider {
		background: rgba(255, 255, 255, 0.1);
	}
	
	.hero-actions {
		display: flex;
		gap: 1rem;
		justify-content: center;
		margin-top: 2rem;
	}
	
	.btn {
		display: inline-flex;
		align-items: center;
		justify-content: center;
		padding: 0.75rem 2.5rem;
		border-radius: var(--radius-btn);
		text-decoration: none;
		font-weight: 600;
		transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
		position: relative;
		overflow: hidden;
		z-index: 1;
	}

	.btn:active {
		transform: scale(0.98);
	}
	
	.btn-primary {
		color: #ffffff;
		background: linear-gradient(135deg, var(--c-primary), var(--c-secondary));
		box-shadow: 0 4px 15px rgba(56, 182, 255, 0.4);
	}

	.btn-primary::before {
		content: '';
		position: absolute;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		background: linear-gradient(135deg, var(--c-secondary), var(--c-primary));
		opacity: 0;
		z-index: -1;
		transition: opacity 0.3s ease;
	}
	
	.btn-primary:hover {
		transform: translateY(-2px);
		box-shadow: 0 8px 25px rgba(255, 107, 149, 0.5);
	}

	.btn-primary:hover::before {
		opacity: 1;
	}
	
	.btn-secondary {
		background: var(--c-card-bg);
		color: var(--c-text);
		border: 1px solid rgba(0,0,0,0.05);
	}
	
	.btn-secondary:hover {
		background: var(--c-background);
		border-color: var(--c-primary-light);
		color: var(--c-primary);
		transform: translateY(-2px);
		box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
	}
	
	.link-card-grid {
		display: grid;
		grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
		gap: 2rem;
		padding: 0;
		width: 100%;
		list-style: none;
	}
</style>

<script is:inline>
	async function updateQuote() {
		const textEl = document.getElementById('hitokoto-text');
		const fromEl = document.getElementById('hitokoto-from');
		
		try {
			// Fade out
			textEl.classList.remove('quote-visible');
			fromEl.classList.remove('quote-visible');
			
			await new Promise(r => setTimeout(r, 800));
			
			const response = await fetch('https://v1.hitokoto.cn/');
			const data = await response.json();
			
			textEl.textContent = data.hitokoto;
			fromEl.textContent = `â€”â€” ã€Œ ${data.from} ã€`;
			
			// Fade in
			textEl.classList.add('quote-visible');
			fromEl.classList.add('quote-visible');
		} catch (e) {
			textEl.textContent = 'çºµä½¿å‰è·¯æ¼«æ¼«ï¼Œäº¦è¦ç ¥ç ºå‰è¡Œã€‚';
			fromEl.textContent = 'â€”â€” ã€Œ è¨€è¥¿æ—©æœ¨ ã€';
			textEl.classList.add('quote-visible');
		}
	}

	// Initial fetch
	updateQuote();
	// Rotate every 10 seconds
	setInterval(updateQuote, 10000);

	// Sync homepage status with layout status
	function syncStatus() {
		const hDate = document.getElementById('hero-date');
		const hRegion = document.getElementById('hero-region');
		const hWeather = document.getElementById('hero-weather');
		
		const gDate = document.getElementById('current-date');
		const gRegion = document.getElementById('current-region');
		const gWeather = document.getElementById('current-weather');
		
		if (hDate && gDate) hDate.textContent = gDate.textContent;
		if (hRegion && gRegion) hRegion.textContent = gRegion.textContent;
		if (hWeather && gWeather) hWeather.textContent = gWeather.textContent;
	}

	setTimeout(syncStatus, 500);
	setInterval(syncStatus, 2000);
</script>
